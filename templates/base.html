<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defentory â€” Cyber Defensive Coverage Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>


<nav class="navbar">
    <div class="navbar-left">
        <a href="{{ url_for('index') }}" class="navbar-logo">
            <img src="{{ url_for('static', filename='images/defentory.png') }}" class="logo-img-small" alt="Defentory Logo">
        </a>
    </div>
    <div class="navbar-right">
        <button class="hamburger" id="hamburger-btn" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div class="navbar-links" id="navbar-links">
            <a href="{{ url_for('intake') }}">Add Detection</a>
            <a href="{{ url_for('report') }}">List View</a>
            <a href="{{ url_for('defendreport') }}">Dashboard</a>
            <a href="{{ url_for('heatmap') }}">Heatmap</a>
            <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                <span id="theme-icon" class="theme-icon">ðŸŒ™</span>
            </button>
        </div>
    </div>
</nav>
<main>
    {% block content %}{% endblock %}
</main>


<script>
    // Theme toggle with sun/moon
    const html = document.documentElement;
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    function setThemeIcon(theme) {
        themeIcon.textContent = theme === 'dark' ? 'ðŸŒž' : 'ðŸŒ™';
    }
    function setTheme(theme) {
        html.dataset.theme = theme;
        localStorage.setItem('theme', theme);
        setThemeIcon(theme);
    }
    // Initial theme
    let theme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    setTheme(theme);
    themeToggle.addEventListener('click', () => {
        theme = html.dataset.theme === 'dark' ? 'light' : 'dark';
        setTheme(theme);
    });

    // Hamburger menu
    const hamburgerBtn = document.getElementById('hamburger-btn');
    const navbarLinks = document.getElementById('navbar-links');
    hamburgerBtn.addEventListener('click', () => {
        navbarLinks.classList.toggle('active');
        hamburgerBtn.classList.toggle('open');
    });
</script>

</body>
</html>